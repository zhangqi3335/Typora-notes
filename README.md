# 📦 Utility Scripts Collection

本仓库包含两个日常开发中常用的小工具脚本，用于 **GitHub 仓库备份自动化** 与 **Markdown 标题自动编号**。
 脚本均可独立使用，也可一起构成高效的编写文档与管理仓库的工作流。

------

## 📌 目录

- [backup.ps1](D:\资料\Typora学习库\backup.ps1)
  - 功能
  - 使用方法
  - 示例
- [sort_md.py](D:\资料\Typora学习库\sort_md.py)
  - 功能
  - 算法逻辑
  - 使用方法
  - 示例输出

------

# backup.ps1 — 本地仓库一键提交推送脚本

### 🚀 功能

`backup.ps1` 用于快速将当前 Git 仓库的修改 **自动 Add → Commit → Push 到 GitHub**。
 非常适合日常笔记、Typora 文档、课堂作业、嵌入式项目等需要频繁保存的场景。

### ✨ 特点

- 自动检测 Git 仓库
- 自动执行 `git add .`
- 自动构建提交信息（可手动传入备注）
- 自动 push 到远程仓库 `origin`
- 极大减少重复操作，提高开发效率

### 🧩 使用

在 Windows PowerShell 执行：

```powershell
.\backup.ps1 "更新了串口通信章节"
```

如不传参数，则脚本会生成默认提交信息：

```powershell
.\backup.ps1
```

### 📘 示例输出

```
✔ 所有文件已提交  
✔ 推送成功  
```

------

# sort_md.py — Markdown 标题自动编号脚本（新版）

> ⚠ **说明**
>
> 仓库中的 `sort_md.py` 已升级为 **新版算法**，
>  旧版本中基于「`#` 首次出现顺序建层级」的实现 **已完全废弃并覆盖**。

------

## 🎯 功能

`sort_md.py` 会自动为 Markdown 文档中的标题生成 **符合 Markdown 语义的层级编号**：

```
## 1 一级标题
### 1.1 二级标题
#### 1.1.1 三级标题
```

支持的标题级别：

```
#  ##  ###  ####  #####  ######
```

------

## 📐 编号规则（新版）

### 1️⃣ 动态基准标题级

- 文档中 **第一个出现的标题级别** 作为逻辑一级标题
- 例如：
  - 文档从 `##` 开始 → `##` 视为 Level 1
  - 文档从 `###` 开始 → `###` 视为 Level 1

------

### 2️⃣ 标准树形编号规则

- 同级标题 → 编号递增
- 子标题 → 在父编号基础上追加 `.1`
- 回到上级 → 自动回退并递增
- 每个顶级标题（如 `##`）视为一个独立区块

------

### 3️⃣ 自动处理复杂情况

- 忽略代码块（``` 包裹内容内不会解析标题）
- 标题文本中允许包含 `# / ##`
- 自动移除原标题中的旧编号（如 `1.`、`2.3.`）
- 不修改非标题文本
- 不生成 TOC
- 保留原有缩进与 Markdown 格式

------

## 🧠 算法逻辑（简述）

1. 扫描全文，确定第一个标题的 `#` 数量作为基准层级
2. 使用固定 6 层计数器维护编号状态
3. 当前逻辑层级 = `当前 # 数 − 基准 # 数 + 1`
4. 当前层级计数 +1，所有更深层级清零
5. 仅重写标题行，其余内容保持不变

------

## ▶ 使用方法

```
python sort_md.py input.md
```

或指定输出文件：

```
python sort_md.py input.md output.md
```

默认生成：

```
input_sorted.md
```

------

### ⚠ Windows 文件名注意事项

Windows 文件名 **不允许包含以下字符**：

```
< > : " / \ | ? *
```

因此不要在文件名中使用 `/`，例如：

```
❌ python sort_md.py "C/C++关键字.md"
```

推荐做法：

1. 使用合法文件名生成文件（如 `C-C++关键字.md`）
2. 在 Markdown 内容或标题中使用 `C/C++`（内容不受限制）

------

## 📝 示例

### 原文

```
# 串口通信
### 并行通信
#### 并行通信的1好
#### 并行通信的2好

### 串行通信
#### 串行通信的1好
#### 串行通信的2好
```

### 转换后

```
# 1 串口通信
### 1.1 并行通信
#### 1.1.1 并行通信的1好
#### 1.1.2 并行通信的2好

### 1.2 串行通信
#### 1.2.1 串行通信的1好
#### 1.2.2 串行通信的2好
```

------

# 📄 License

本仓库中的脚本可自由使用、修改与分发。

欢迎在此基础上继续扩展更多 Markdown / 文档 / 自动化工具。

------

## ❤️ 作者

该工具集合由本人整理与开发，用于提升 Markdown 文档管理与 Git 仓库备份效率，
 适合 **嵌入式学习笔记、实验报告、项目说明书、技术文档整理** 等场景。t 仓库备份效率，适合嵌入式文档、实验笔记、项目说明书等场景。